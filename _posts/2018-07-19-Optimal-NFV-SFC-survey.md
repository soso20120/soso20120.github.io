---
layout: post
title: Optimal Network Function Virtualization and Service Function Chaining：A Survey
date: 2018-07-19 09:09:33
excerpt: 
tags:
- NFV
- SFC

---

## <span class="tooltip" titles="Network Function Virtualization 网络功能虚拟化" >NFV</span>

![ETSI-nfv-architecture.JPG](/assets/img/ETSI-nfv-architecture.JPG)

#### NFVI

* 硬件资源：服务器和存储/网络设施
* 虚拟资源：虚拟机（VM），虚拟节点和虚拟链路

#### VNF

* VNF是在虚拟机上运行的网络功能的软件实例
* 单个VNF可以由部署在多个虚拟机上的多个子功能组成

#### MANO

MANO提供VNF的配置，并配置它们和相关的基础设施。包括三个部分：
* <span class="tooltip" titles="NFV orchestrator 协调器">NFVO</span>：负责创建端到端的服务，管理网络服务的生命周期。
	1. 在服务目录中注册网络服务及其所需参数和相关规则;
	2. 创建，查询，更新和删除转发规则和网络服务序列;
	3. 创建，扩展，更新和终止网络服务。
* <span class="tooltip" titles="Virtual network functions manager 虚拟网络功能管理器">VNFM</span>：负责管理VNF生命周期，包括创建，扩展，更新，升级和终止VNF。VNFM和EMS都被分配来管理VNF，因此它们之间的职责划分在不同的情况下可能会有所不同。
* <span class="tooltip" titles="Virtualized infrastructure manager 虚拟化基础架构管理器">VIM</span>:管理NFVI的资源，包括软件清单，资源分配，电源管理，资源回收，NFVI性能问题分析以及故障管理和性能优化等操作的数据收集。因为资源在多个用户服务之间共享，所以资源分配是一项复杂的任务，VIM必须处理竞争请求和约束。

#### <span class="tooltip" titles="Operations support system/Business support system 运营支持系统/业务支持系统">OSS/BSS</span>

* OSS/BSS提供管理系统，帮助服务提供商部署和管理端到端网络服务，与服务的订购、计费、、续订和故障排除有关。EMS提供OSS所需的信息。

## NFV应用场景

#### 虚拟中间件Virtualized middle-boxes

* 中间框是源和目标之间的路径上的任何中间节点，其提供除路由器的正常标准功能之外的功能，例如路由发现和路由选择。
* 一些常用的功能已经在Linux中实现。

#### 虚拟交换机和路由Virtualized switching and routing

* 已有一些交换机的开源软件。
* 路由虚拟化暂时还不会应用，因为无法满足高性能要求。
* 提供商边缘（PE）路由器和BRAS的虚拟化是可行的。

#### 虚拟访问网络元素

* 驻留在混合光纤DSL远程节点中要求紧凑、功耗低、维护成本低。通过虚拟化可能实现。
* C在任何企业或住宅宽带用户的客户端设备（CPE）也可以虚拟化。通过这种方式，CPE的许多功能被移动到运营商的网络位置，并且CPE就像连接到服务提供商网络的简单的第2层转发设备一样。

#### 移动核心网的虚拟化

* 移动网络的特点是各种各样的专有硬件设备，移动运营商可以使用NFV为其客户提供低成本的高质量服务。

#### 内容交付网络的虚拟化

* 在内容交付网络=中，常部署缓存节点以提高多媒体服务的质量。但是这会浪费专用资源，使用NFV可以优化。

#### 网络功能虚拟化即服务

* 服务提供商可以提供NFVI及其平台、VNF实例为服务，类似于云服务模型。

## <span class="tooltip" titles="Service Function Chaining 服务功能链" >SFC</span>

![IETF-sfc-architecture.JPG](/assets/img/IETF-sfc-architecture.JPG)

#### 框架

* Management Plane：管理服务功能的安装，维护和终止。
* Data Plane：其中分类器在将流量转发到服务功能路径（SFP）之前对流量进行识别和分类。
* Control Plane：建立和管理分类器和服务功能之间的路径。首先，SFC控制器根据分类器分组的结果来生成或选择特定服务功能链。同时用户简档存储用户偏好和订阅信息。然后控制器参考两者，建立满足服务功能及其连接链路的容量和QoS要求的链路。之后将服务功能放置在网络中。最后，策略控制器用于维护表示转发路径的SFC策略表。

#### SFC

* 服务功能链是由（部分）有序的网络功能组成的服务的表示。
* 最简单的服务功能链是端点之间服务功能的线性序列。
* 复杂的情况下，服务功能可以看作不同路径下的网络流，使用<span class="tooltip" titles="VNF Forwarding
graph VNF有向图">VNF-FG</span>描述，分为两部分：
	1. 节点：网络功能
	2. 边：点之间的连接

![examples-of-sfc.JPG](/assets/img/examples-of-sfc.JPG)

在端到端网络服务场景中，<span class="tooltip" titles="Service function path 服务功能路径">SFP</span>是服务功能实例（SFI）的有序列表。使用
<span class="tooltip" titles="Service function forwarders 服务功能转发器">SFF</span>作为中间转发元件，引导网络流量。为了引导流量沿着正确的路径，IETF建议使用包含服务路径信息的网络服务标头（NSH）。NSH由服务分类器添加，该分类器通过检查分组的报头和有效载荷来确定每个传入分组所需的SFP。NSH通过共享在节点之间传递的元数据来帮助实现拓扑独立性，并提供在分类器和SF之间以及SF之间交换上下文信息的能力。

#### SFC的四个阶段

第一个问题是如何描述服务的功能和非功能属性。服务描述定义了服务提供的内容及其使用方式。它包括服务接口，以及其使用的技术限制。

第二个问题是排序约束。虽然服务功能通常是独立的，但许多服务功能都有严格的排序，必须仔细考虑。因此，需要一种一致的方式来将服务功能的排序强加于服务链中。

另一方面，网络服务的部署耦合到网络拓扑。这意味着在最佳资源使用方面对服务链的一些限制; 因此，最优服务功能链中最重要的问题是有效的资源分配。此问题确定必须在哪些物理节点上放置VNF（部署），以及必须在何时执行它们（调度）。

* **<span class="tooltip" titles="Service chain Description">SC-D</span>**

因特网中用于服务描述的流行方法是使用Web服务描述语言（WSDL）或统一服务描述语言（USDL），旨在从业务，操作或技术角度描述Web和因特网服务。可用的服务描述语言不容易适应弹性服务环境，其中更新服务链是一项具有挑战性的任务。

* **<span class="tooltip" titles="Service chain Composition">SC-C</span>**

根据请求，如何有效地连接不同的VNF，以便以最合适的方式组成网络服务（VNF-FG）。

* **<span class="tooltip" titles="VNF-FG Placement">VNF-P</span>**

根据给定的目标，将VNF放在合适的节点上。每个VNF都定义为包括计算，存储或网络的类型; 因此，必须将其分配到具有相同类型的物理节点中。

* **<span class="tooltip" titles="VNF Scheduling">VNF-S</span>**

调度技术允许VNF共享资源，以便最小化网络服务的总执行时间。目前研究较少。

## 现有方法

#### 应用场景

* **动态与静态**

VNF的动态资源分配是一个非常重要的问题。必须在运行时分配资源，会带来了新的挑战，因为VNF资源可能由于动态流量而扩展，并且QoS需求可能由于服务请求的变化而改变。此外，我们应该监视VNF的可靠性问题，当VNF发生故障时，我们需要为相应的服务请求重新分配VNF。

* **在线与离线**

在离线场景中，给定一组服务，我们将它们嵌入到网络中。在线方案中，服务请求逐个到达，每个服务一到达就嵌入到网络中。在这种情况下，可能需要迁移和重新映射已嵌入的VNF。

* **单个与多个提供商**

在提供网络服务时，有时需要实现跨越多个服务提供商的基础设施的服务链。 但是，在多种提供商场景中，信息交换的限制和不同提供商之间互操作性的问题意味着一些新的挑战。

#### 参数考虑

* **资源属性**

属性不同，考虑的方法不同。虚拟功能具有不同类型和不同属性。根据物理节点能够托管的VNF的类型，它们的属性可能不同。链路属性也不同，例如带宽或传播延迟。

* **目标**

在解决SFC问题时，必须优化一个或多个战略目标。不同的网络服务需要不同的目标。例如，在实时网络服务中，需要低延迟。对服务提供商而言重要的主要目标是最大化接受率，增加收入，最大限度地减少消耗资源和降低成本。在文献中，延迟，可靠性，负载平衡和节能等目标也很常见。

* **评估指标和工具**

评估指标对于衡量解决方案的质量是必要的。可以根据使用的目标函数使用不同的评估度量。用于评估SFC解决方案的一些性能评估指标是服务处理时间，收入，成本，活动物理节点数，接受率，资源利用率和流量拥塞。对于模拟工具，文献中常用的有MATLAB，CVX，CPLEX，MININET，NS2等。

#### 解决方案策略

* **优化模型**

可以将SFC问题建模为优化问题。比如整数线性规划（ILP），混合整数线性规划（MILP），整数规划（IP），混合整数规划（MIP）等。

* **解决方案技术**

由于SFC是一个优化问题，它可以通过使用精确，近似，启发式或元启发式解决方案技术来解决。

* **单阶段与多阶段**

如前所述，SFC的问题由四个阶段组成。许多现有方法将注意力集中在仅解决一个问题阶段。 但是，在某些工作中，同时考虑问题的不止一个阶段。这些方法可以以不协调或协调的方式起作用。

## FUTURE DIRECTIONS

