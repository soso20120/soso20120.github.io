---
layout: post 
title: "git学习"
date: 2017-07-11 11:11:11 +0800
categories: [Tech]
excerpt: 这是一个学习git总结过程。不断更新。
tags:
  - git
  - gitHub
---

### 1 git和gitHub的关系

git是一个分布式版本管理软件。<br>
>采用版本控制系统(VCS)可以记录项目或文件的每一个版本。它的强大之处在于你可以轻松恢复到原先的版本。

> * 集中式版本控制系统(Centralized Version Control Systems)<br>
> 一个单一的集中管理的服务器，保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新。缺点是中央服务器的单点故障。
> * 分布式版本控制系统(Distributed Version Control System)<br>
> 客户端并不只提取最新版本的文件快照，而是把原始的代码仓库完整地镜像下来。这么一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。

gitHub是一个代码托管平台。<br>
gitHub这个网站使用git这个版本管理软件来托管代码。

<br>
### 2 git的三分区

![git三分区及常用命令](/assets/images/InkedInkedgit.jpg)

###### 检查当前文件状态
可以看到被跟踪的并处于暂存的文件

	git status

###### 查看已暂存尚未提交和未暂存的更新
此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。

	git diff

###### 已经暂存起来的文件和上次提交时的快照之间的差异

	git diff --cached

<br>
### 3 合并分支

1. 有共同的祖先，但非直接上下有关系的分支

假如是maser分支和a分支，在master分支上`git merge a`，将a分支合并到master分支。

也可以是`git checkout a; git merge master`，将master分支合并到a分支。

2. 直接上下游分支关系

如果a分支在master分支的下游，则仅仅是让a分支移动到指向master分支的记录上。

<br>
### 4 rebase

这个方法的优势是使得平行开发的分支像是按顺序开发。

比如，`git rebase master`可以使a分支移到master分支的上游。

同时，需要切换到master分支，'git rebase a'使master分支的记录移到a分支之前。

> `git rebase <branch>`会先执行`git checkout <branch>`，<branch>分支里的每个提交(commit)都被取消掉，并且把它们临时保存为补丁(patch)(这些补丁放到".git/rebase"目录中)，然后把<branch>分支更新到最新的master分支（即<branch>分支引用移动到master上），最后把保存的这些补丁应用到<branch>分支上。当<branch>分支更新之后，它会指向这些新创建的提交(commit),而那些老的提交会被丢弃。 如果运行垃圾收集命令(pruning garbage collection), 这些被丢弃的提交就会删除.

###### rebase的过程
![rebase时发生了什么](/assets/images/gitRebase.jpg){:height="410px" width="400px"}

###### rebase和merge的区别
![rebase和merge的区别](/assets/images/RebaseAndMerge.jpg){:height="400px" width="400px"}

###### rebase时候，git做了些什么呢？

> 🍧 先将master分支的代码checkout出来，作为工作目录<br>
> 🍧 然后将a分支从master分支创建起的所有改变的补丁，依次打上。如果打补丁的过程没问题，rebase就搞定了<br>
> 🍧 如果打补丁的时候出现了问题，就会提示你处理冲突。处理好了，可以运行git rebase –continue继续直到完成<br>
> 🍧 如果你不想处理，你还是有两个选择，一个是放弃rebase过程（运行git rebase –abort），另一个是直接用test分支的取代当前分支的（git rebase –skip 这个会将引起冲突的commits丢弃）。

<br>
### 5 拉取代码pull and fetch

在合并代码前，如果远程分支与本地分支有分叉时，需要先pull，再push。

`git pull`先获取(fetch)远程服务器的代码，再合并(merge)到本地

`git fetch`则是获取远程分支，但不会进行合并等其他操作

`git pull --rebase`可以在拉取代码，远程分支与本地分支有分叉时，将远程分支上改动替换当前的分支上。使用rebase代替merge，主要是不会产生merge节点。但是会很危险（更容易产生冲突）

`git merge --no--ff <branch>`

<br>
### 6分支

`git branch`查看所有分支

`git branch <branch>`创建分支

`git checkout <branch>`切换分支

>切换分支前，应注意还没有提交的修改，否则会产生冲突。原因在于切换时，git会自动的恢复工作目录到想切换的分支指针所指的commit对象的所指的整棵树的文件状态。

`git chekcout -b <branch>`创建分支并切换

`git merge <branch被合并的分支名>`合并分支

`git branch -d <branch>`合并且删除分支