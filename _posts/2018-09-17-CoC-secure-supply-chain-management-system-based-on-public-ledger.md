---
layout: post
title: CoC: Secure Supply Chain Management System based on Public Ledger
tags:
- Blockchain
- Supply Chain

---

## Abstract

现代供应链是一个复杂的系统，在全球化经济一体化背景下对不同部门起着重要作用。提出供应链管理系统来处理日益复杂的问题，提高货物流动的效率。它还有助于防止潜在的欺诈行为并保证贸易合规性。目前，大多数公司都在维护供应链管理的IT系统。但是，这种方法有一些限制，可以防止人们获得大部分供应链信息。利用新兴的分散式分类账技术构建供应链管理系统是一个很有发展前景的方向。但是，分散式分类帐通常具有低性能和缺乏保护分类帐上存储的信息的能力。为了克服这些挑战，我们提出了CoC，一种基于混合分散式分类帐的新型供应链管理系统。我们利用模型和安全机制开发了一种有效的块构造方法，以防止未经授权访问存储在分类帐上的数据。

## INTRODUCTION

现代经济在很大程度上取决于全球合作，特别是先进制根据世界贸易组织的报告，过去几十年国际贸易量保持高速增长，2014年世贸组织成员的商品出口额达到18.0万亿美元[1]。在这种爆炸式增长的背后，供应链起着至关重要的作用。除了经典的功能，如使货物运输更顺畅，降低国际运输成本，现代供应链系统正成为各种商业活动的中心，如规划/预测，采购，客户服务和绩效衡量。由于供应链规模大，功能复杂，有效管理并不容易。为响应这些需求，Keith Oliver于1982年引入了供应链管理系统的概念[2]，供应链管理软件市场在2014年超过大多数软件市场总额达到99亿美元[3]。为提高供应链管理系统效率和增加更多功能，已经做了大量工作。例如，研究人员提出将传感器（例如GPS接收器和RFID）集成到供应链中，以便为最终用户提供更多信息，并将网络世界与物理世界更紧密地结合起来[4]。随着云计算技术的出现，基于云的供应链管理系统也在不断发展，以提高可靠性并降低成本[5]。

然而，现有的供应链管理系统受到一些限制，这些限制阻止用户实现供应链信息的最大价值。两个主要问题是：（i）供应链本质上涉及多方。但是，现在大多数公司和利益相关者都使用他们自己的供应链管理系统，这些系统难以集成在一起以提供统一的平台。因此，提供端到端跟踪和共享信息以启用新功能和服务是不方便的。此外，供应链信息是敏感的，公司可能不愿意透露和与他人分享。 （ii）作为一个IT系统，供应链管理系统也面临着网络攻击，特别是对供应链信息完整性的破坏，这可能导致欺诈，货物损失和贸易不合规。最近Ran-somware攻击的上升也给供应链管理系统带来了巨大风险，因为失去对历史数据的访问会导致财务损失[6]，[7]。

分散式分类帐技术（DLT）已用于比特币和类似的分散系统，实现加密货币以记录和共享交易历史[8]，由一组用户维护，每个用户都可以维护本地副本分类帐。 一组记录嵌入到块中，块通过哈希值链接。 一个共识机制可以帮助这些用户在将新块添加到系统时达成一致。 为了修改现有记录，对手必须与所有诚实用户竞争[9]，[10]。 这些功能使得分散式分类帐成为一种有前途的技术，可以在分布式环境中实现全球供应链管理系统。 技术创业公司和跨国公司都开始尝试基于分布式账本的供应链管理系统[11] - [13]。

使用分散式分类帐创建供应链管理系统的大多数现有努力都是将DLT直接应用为具有共识保证的分散存储的直接示例，即将供应链相关信息存储在块而不是传统文件系统中，但忽略了技术上的缺点：（i）分散式分类帐通常存在性能问题，例如有限的吞吐量和添加新块的长延迟，这可能不足以支持需要存储大量供应链操作记录并支持高事务吞吐量的应用程序方案; （ii）存储在分散分类账中的信息分发给不同节点并由其维护; 并且缺乏实施访问策略和控制对分布式分类帐中存储的数据的访问的机制。

为了解决这些缺点，我们提出了CoC（区块链供应链），一种新型的供应链管理系统利用分散的分类账技术。 CoC对底层分布式分类帐使用混合模型和两步块构造方法，实现了安全性和性能之间的良好平衡。 此外，它还引入了一种新的存储方案，可以减少数据冗余，同时充分满足供应链管理的需求。

由于供应链管理系统在涉及敏感信息的业务操作中起着核心作用，因此在混合模型和存储方案之上构建保护机制，以保证只有授权用户才能访问分类账上的相应数据。 我们还从性能和安全角度评估了所提出的系统，以证明其在实际环境中的有用性。

我们在这项工作中的贡献总结如下：
* 我们提出了一种基于公共分类账的供应链管理系统的新颖设计，作为供应链生态系统中涉及的各方和利益相关者进行交易和共享信息的统一平台;
* 我们为具有低延迟的系统开发了两步块生成方法，并且有效的存储方案减轻了分散式分类帐技术的存储开销问题; 和
* 我们描述了身份管理和数据保护方案的设计，该方案解决了基于分散式分类账的供应链管理系统的安全问题。

本文的其余部分安排如下：第二部分简要介绍了供应链管理系统和分散式分类帐技术。 在第三节中，我们概述了拟议的CoC系统和分类帐构建的混合模型。 CoC的关键部件的详细设计在第四节中给出。 第五节审查了相关工作，我们在第六节中完成了工作。

## Background

#### Supply Chain Management System Supply

供应链管理不仅仅是物流管理的延伸，还包括最终用户通过原始供应商整合业务流程，这些供应商提供能够为客户增加价值的产品，服务和信息[14]。 典型的供应链管理功能包括订购/接收原材料/产品，支持客户服务和性能测量。 需要协调整个企业的多种职能，以便为供应链事件提供快速和高质量的响应[15]。 图1描述了供应链管理的功能及其在业务运营中的地位。 除了处理物理货物外，供应链系统现在也用于数据传输（例如，Fedex正在帮助亚马逊客户移动大量数据）。

#### Decentralized Ledger Technology

分散式分类账或区块链技术首先由比特币作为分布式簿记系统引入，以防止双重支出[8]。块的生成基于工作量证明（如图2所示），并且每个参与者保留链的完整副本。他们通过采用最长链来达成共识，如果攻击者想要修改链中块的内容，他/她必须与系统的所有诚实参与者竞争以生成有效块。总之，区块链有三个主要特征：（i）公共可访问性。用区块链存储的所有信息都可供所有人公开访问; （ii）不变性。修改，更改或删除已添加到区块链的信息是不可能的; （iii）恢复力。系统的每个参与者都保留区块链的完整副本，没有单点故障会影响存储信息的可用性。区块链的一个主要问题是块生成的高延迟，其由昂贵的工作量证明过程（例如，对散列函数的前映像的强力搜索）引起。为了更快地生成块，提出了两种不同的策略：利益证明和许可的块链。表I总结了这些策略的特征。

## Overview of CoC and Hybrid Model

#### Participants in CoC

* Ordinary users:普通用户可以将CoC用于不同的供应链相关操作，例如，提交新的原材料请求，跟踪运输信息，处理提单以及分析与用户相关的历史数据。 供应链是一个复杂的系统，CoC支持多个普通用户相互协作;
* Third Party users:除普通用户外，还有另一组用户，即第三方用户，他们主要通过CoC监控供应链信息。 典型的第三方用户包括政府监管机构，如CBP和保险公司，他们需要监控货物的状态; 和
*  Supporting entities:CoC还包括供应链运营的支持实体。 其中两个主要支持实体是身份管理部分和金融机构。 在这里，身份管理可以是CoC的一部分，而金融机构拥有自己的IT系统，并且只与CoC交互以提供所需的服务，例如支付处理。

在本文的后面，“如果没有明确说明，”用户“一词代表普通用户和第三方用户

#### Hybrid model of decentralized ledger and system overview

现有的分散式分类账模型不能很好地满足供应链管理的要求：
* 工作量证明涉及繁重的计算，通常很慢，可能无法满足供应链管理的性能和操作要求;
* 供应链管理系统的股权证明不稳定，因为预测区块的需求并非易事;
* CoC旨在提供统一的供应链管理平台，可以为多个不需要完全信任的实体提供服务; 并且可能难以在许可的区块链网络的受损节点上实现对块构造的共识。

CoC通过使用混合模型来组织分布式分类帐，分离提交记录的权利和构建块的权利。 具体而言，CoC仅允许用户，第三方用户和支持实体向系统提交供应链相关记录，但是块构建对公众开放并基于工作量证明。 贡献其计算资源以帮助构建和维护分布式分类帐的人称为帮助程序。 帮助者的数量可能相对较大，并受交易需求的驱动。 CoC对帮助者没有太多限制。 他们可以随时加入或离开系统。 图3说明了系统和所涉及的不同类型的实体。

#### Security model

我们假设支持实体是可信的，例如，他们将遵循预定义的协议与其他方协作，并且不会尝试将伪造的信息注入系统。第三方用户通常是大公司和政府机构，也是值得信赖的。他们将遵循政策来执行他们的任务（例如，生成合规证书）。任何个人助手都不受信任，他/她可能会尝试使用不同的方式来破坏系统。但是，帮助者的数量通常很大，并且假设他们中的大多数是诚实的并且将遵循预定义的协议。用户不完全信任。虽然他们有动力保持准确的信息以支持他们的业务活动，但很难保证所有用户都有足够的网络保护并且可能会受到损害（例如，丢失私钥，感染木马或病毒）。受损用户可能生成无效的供应链信息和/或尝试修改历史数据。我们还假设不同方之间的通信受到保护和安全，即攻击者不能篡改或窃听不同方之间的消息。

## DETAILED DESIGN OF KEY COMPONENTS OF COC

#### Block Construction for Supply Chain Information

基于分散式分类账的供应链管理系统面临的主要挑战之一是能够在短时间内支持大量业务。 如第III部分所述，用户不受信任，许可的区块链系统不能用于达到低延迟的块构造。 利益证明策略对供应链管理都不起作用，因为交易量是动态的，并且存在基于股权的系统进入两种极端情况之一的风险和可能情况（即，没有人具有这种情况） 足够的股份或每个人都有足够的股份来创建一个有效的块）。

**Two-step block construction**

为了在考虑供应链管理特性的同时克服区块链技术的性能障碍，我们提出了一种新的CoC块构造的两步法。 基本思想是允许用户根据他们的预测为不久的将来使用预留块，然后用户可以在需要时立即使用保留块（如图4所示）。 具体而言，两步块构造机制的工作原理如下：
* step1：生成预订块。 当用户向系统提交他/她的预订请求时，请求通过八卦协议分发给所有帮助者。 接收请求的助手尝试通过挖掘创建块。 图5（a）描绘了预订链的结构。 对于链中包含的每个块，它包含想要保留块的用户信息; 用户想要为该块支付的费用; 创造它的助手的身份; 和其他重要信息。 请注意，所有参与者必须就预订链达成共识，这是通过工作证明来实现的。
* step2：生成数据块。 当用户有一个需要添加到包含实际数据的块链的供应链记录时，它首先检查预订链以查看他/她是否有可用于块生成的预留。 如果他/她有可用的预订，则构建用于供应链记录的数据块，并且块中包括预留证明。 图5（b）显示了数据块的结构。 将此块添加到链中不需要工作证明。 当其他对等体接收到新块时，它首先检查其有效性：块是否正确构造以及预留是否有效。 如果它通过了所有检查，则接受新块并将其添加到链中。 该系统还需要就所有已接受的块达成共识，并且我们可以为此目的应用不同的共识协议（例如，Paxos协议[18]）。

与基于工作量的区块链构造相比，两步块构造方法不会减少总体工作负载或延迟（实际上，第一步的工作负载和延迟与基于经典的工作量证明非常相似）。 但它提供了隐藏/转移延迟的机制：只要用户有足够的预留，就可以显着减少添加新供应链记录的延迟。

对于预留步骤，等待时间由需求（预留请求的数量）和供应（在给定时段内可以生成预留的数量）确定。这是典型的供需平衡问题。随着增加块结构的供应不需要太多时间（更多的辅助器可能有助于从供应侧生成块），系统实现均衡的延迟可能很短。预约的第一步是基于工作量证明，预留块生成的比例与参与系统的助手数量成正比[19]。当用户支付预订时，市场机制可以根据供需自动调整。两步块构建方法还可以应用于其中需求类似于本工作中讨论的供应链管理系统的其他场景。与股权证明方法相比，两步块生成不会出现供过于求或供不应求的风险。

#### Storage Design of CoC

信息存储是其他供应链管理运营的基础。 根据两步块结构的设计，CoC需要维护两个分散的分类账：预留分类账和数据分类账。 维护两个分类帐的最简单方法是让每个人都保留两个分类帐的完整副本。 然而，这不是有效的并且增加了参与者的成本。 我们为CoC提出了一种更有效的存储方案来管理两个分散的分类账。 由于这两个分类账有不同的用途，我们采用不同的方法来管理它们。

**Reservation ledger storage**

预订分类帐的构建涉及用户和帮助者，其中用户提交请求并且帮助者进行挖掘以构建块。 帮助者在比特币系统中扮演着与矿工类似的角色，他们不需要存储整个预订链。 相反，它们可以运行简化验证协议（SVP）用于预留块构造[8]，例如，每个帮助器仅保留少量预留块，并且如果在其之后添加足够数量的块，则接受一个。 同时，CoC需要一组完整的节点来保留整个预留链。 用户可以维护预订链的整个副本并作为完整节点工作，因为他们需要使用数据分类帐的预留信息。 为了降低整个节点的存储成本，系统可以设置预留块的实时时间; 并且完整节点只能保留链中的最新块。 这也阻止了用户囤积不必要的预留块。

**Data ledger storage**

数据分类帐用于存储真实的供应链信息。 支持实体和帮助者不必跟踪供应链信息，因此他们不需要存储数据链。 第三方用户通常需要监控不同用户的供应链信息，并保留数据链的完整副本。 对于用户而言，他们不必存储不相关的供应链信息来保存其存储资源。 由于供应链运作通常涉及多方，因此每条供应链信息的副本数量仍然合理。 当分散分类账用于构建数字货币系统时，参与者必须保留所有交易历史以防止双重支出。 供应链管理的情况不同，因为交易有时彼此独立。 因此，可以丢弃旧信息以进一步降低存储成本。

#### Identity Management of CoC Decentralized

比特币系统中使用的分散式分类帐没有集中的身份管理组件，因为它是匿名的，并且每个参与者可以生成他们自己的凭证（例如，公钥/私钥对）以在系统中使用。 但是，CoC针对供应链管理方案，针对比特币或加密货币提出了不同的要求。 CoC的参与者在系统中扮演不同的角色（如图3所示）。 因此，他们的身份必须采用不同的策略来管理。

Helper是CoC中最大的一个团队，使用集中式方法管理这个组通常非常动态且昂贵。此外，帮助者只贡献他们的计算资源来维护CoC，并且不需要验证他们的身份。因此，CoC中的帮助者可以生成他们自己的公钥/私钥对而无需通知其他人。用户生成供应链信息;并且有必要将信息与其创建者绑定。 CoC使用传统的身份管理组件为用户生成公钥/私钥对，并使用密钥为提交给CoC的信息生成数字签名，以确保真实性/完整性。有关使用分散式分类账建立PKI的积极和持续的研究工作[20]，[21]。当这些方案足够成熟时，它们可用于取代集中的身份管理系统。对于作为支持实体的金融机构，他们维护自己的身份管理系统，因为他们通常有自己的标准和合规要求。

身份管理不必由单个实体操作。只要可以互操作，就可以集成多个身份管理系统。除了使用公钥/私钥对识别用户外，CoC还支持使用生物识别技术进行身份管理。

#### Supply Chain Management Information Protection When

当供应链生态系统的利益相关者，用户和公司与CoC交互时，他们的供应链管理相关记录和交易将混合并存储在分布式分类帐中。 但是，很明显，他们不想向无关联方披露信息。 为满足此要求，加密用于保护分类帐上的供应链管理记录。

* 记录加密。 记录的创建者选择随机AES密钥dek来加密记录。 创建者有责任选择记录的适当属性来加密并保留明文中的其他部分;
* 授权访问权限。 创建者还创建用户/支持实体的列表，例如涉及的公司，政府机构或金融机构。 通过与身份管理组件一起工作，创建者进一步使用列表中的用户/支持实体的公钥来加密dek。 dek的密文可以与加密记录一起存储在分布式分类帐上，作为创建者允许这些访问的证据。

使用此设计，帮助程序和不相关的用户/支持实体无法通过观察分布式分类帐来学习有用信息，因为它们无法访问密钥dek。 这种方法独立于基础分散的分类账; 它可以支持记录级别的灵活访问控制。 如果一组记录与同一组用户/支持实体共享，则创建者可以使用相同的dek来避免多个时间密钥分发。 也可以应用用于安全数据分发的其他加密技术，例如，属性加密和代理重新加密[22]。

## Related Work

在本节中，我们将简要回顾有关使用DLT进行供应链管理的现有工作。 Korpela，Hallikas和Dahlberg注意到区块链技术提供了一种连接不同利益相关者的公共模型; 并提供了一系列影响这种系统采用的因素[23]。 Tian提出了一种结合RFID和分散式分类帐的农业食品供应链设计。 这项工作提到了区块链的一些性能限制，但没有提供任何解决方案[24]。 IBM在Hyperledger项目之上引入了基于区块链的供应链管理系统和基于块链的提单系统，Hyperledger项目是一个纯粹许可的分散式分类账平台[25]。 沿着这个方向还有其他的工作[11] - [13]，[26]。 但是，他们没有考虑性能限制，不同公司之间的协作以及安全要求。

## Conclusions

供应链管理在经济中发挥着重要作用，特别是当商业实体更加依赖于彼此时。 CoC使用混合模型和两步法维护基于区块链技术的分散式分类帐，以更有效地管理供应链信息，而不会影响分散式分类帐的理想功能。 此外，它还引入了一种保护机制，以防止未经授权的参与者访问存储在分类账上的供应信息。 下一步，我们计划实施一个完全功能
原型并评估其在生产环境中的有效性。 由于当前的设计涉及集中的身份管理组件，目标是设计一个分散的身份管理方案，以使整个系统分散，从而进一步增强整个系统的弹性，可靠性和安全性。